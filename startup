#!/usr/bin/env bash
# Ultroid Extended - Heroku Optimized Version
# Modified startup script for Heroku compatibility

echo "
            ┏┳┓╋┏┓╋╋╋╋┏┓┏┓
            ┃┃┣┓┃┗┳┳┳━╋╋┛┃
            ┃┃┃┗┫┏┫┏┫╋┃┃╋┃
            ┗━┻━┻━┻┛┗━┻┻━┛
   
      Ultroid Extended - Heroku Edition
      https://github.com/ThePrateekBhatia/Ultroid
"

# Handle Heroku environment variables and configuration
if [ -f .env ]; then
    set -o allexport
    source .env
    set +o allexport
fi

# Support for both SESSION and SESSION1 variables (Heroku compatibility)
if [ -n "$SESSION" ] && [ -z "$SESSION1" ]; then
    export SESSION1="$SESSION"
fi

# Set Redis URL if provided by Heroku
if [ -n "$REDIS_URL" ] && [ -z "$REDIS_URI" ]; then
    export REDIS_URI="$REDIS_URL"
fi

# Start the bot
if [ -n "$SESSION1" ]; then
    echo "Starting Ultroid Extended..."
    python3 -m pyUltroid
else
    echo "No session string found. Please set the SESSION environment variable."
    exit 1
fi
